<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion Cyber Campus</title>
    <!--  Le même CSS que login.html -->
    <style>
        /* ... (Le CSS de login.html, copié ici) ... */
                @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 {
            animation: slide1 10s linear infinite;
        }

        .img2 {
            animation: slide2 10s linear infinite;
        }

        .logo {
            font-size: 2.5em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .logo::before {
            content: '';
            font-size: 0.8em;
            margin-right: 10px;
            animation: rotate 5s linear infinite;
            display: inline-block;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgb(0, 0, 0);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        @keyframes buttonPulse {
            0% { background-color: #020202; color: #ffffff; }
            50% { background-color: #1a2a6c; color: #c8ff00; }
            100% { background-color: #000000; color: #ffffff; }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
        }

        @keyframes textChange {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        main {
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 20px;
            flex: 1;
        }

        .login-section,
        .rates-section,
        .locations-section,
        .products-section {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .login-section {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #fdbb2d;
            transition: width 0.3s;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background-color: rgb(255, 253, 250);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.3);
            outline: none;
        }

        button {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
        }

        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 10px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .rates-section th:first-child,
        .rates-section td:first-child {
            padding-left: 20px;
        }

        .rates-section th:last-child,
        .rates-section td:last-child {
            padding-right: 20px;
        }

        .rates-section .loading-message {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style-type: none;
        }

        li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
        }

        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
            margin-top: auto;
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
        }

        .notification p {
            margin-bottom: 15px;
        }

        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .notification .ticket-info {
            margin-bottom: 15px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 5px;
        }

        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 0 10px;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }

        /* Footer Popup Styles */
        .footer-popup {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translate(-50%, 200%);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(129, 0, 0, 0.95) 0%, rgba(0, 60, 150, 0.95) 100%);
            backdrop-filter: blur(10px);
            color: white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 89, 255, 0.3),
                        inset 0 0 60px rgba(0, 89, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-popup.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        .footer-popup .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }

        /* Media Queries */
        @media screen and (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .logo {
                font-size: 2em;
            }

            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }

            main {
                padding: 10px 5px;
            }

            .login-section,
            .rates-section,
            .locations-section,
            .products-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .rates-section {
                margin: 0 -5px;
                width: calc(100% + 10px);
                border-radius: 0;
            }

            .rates-section table {
                font-size: 14px;
            }

            .rates-section th,
            .rates-section td {
                padding: 8px;
            }

            .footer-popup {
                width: 92%;
                padding: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.2em;
            }

            .rates-section th,
            .rates-section td {
                padding: 6px;
                font-size: 12px;
            }

            .notification {
                width: 95%;
                padding: 15px;
            }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }

        /* Modification des media queries */
        @media screen and (max-width: 768px) {
            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }
        }

        @media screen and (max-width: 320px) {
            .nav-button {
                padding: 8px 12px; /* Padding réduit pour les très petits écrans */
                font-size: 11px;
            }
        }
    </style>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module">
        import { getActiveDatabase } from './firebase-config-manager.js';
        import { ref, get, set, push, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

        const adminUserId = '<!-- ADMIN_USER_ID -->';
        const networkName = '<!-- NETWORK_NAME -->';
        const contactNumber = '<!-- CONTACT_NUMBER -->';
        const fedapayApiKey = '<!-- FEDAPAY_API_KEY -->';

const _0x41dc26=_0x2ff7;(function(_0x4f584d,_0x4b04a8){const _0x451ab4=_0x2ff7,_0x24b04a=_0x4f584d();while(!![]){try{const _0x5cdda8=-parseInt(_0x451ab4(0x1ab))/0x1+-parseInt(_0x451ab4(0x1be))/0x2+-parseInt(_0x451ab4(0x1da))/0x3+-parseInt(_0x451ab4(0x177))/0x4+parseInt(_0x451ab4(0x19c))/0x5+parseInt(_0x451ab4(0x1c9))/0x6+parseInt(_0x451ab4(0x15d))/0x7;if(_0x5cdda8===_0x4b04a8)break;else _0x24b04a['push'](_0x24b04a['shift']());}catch(_0xfcb227){_0x24b04a['push'](_0x24b04a['shift']());}}}(_0x3830,0x79235));let db,userConfigRef;async function initializeDatabase(){const _0x8e0da9=_0x2ff7;db=await getActiveDatabase(),userConfigRef=ref(db,_0x8e0da9(0x18d)+adminUserId+_0x8e0da9(0x17e)),console['log'](_0x8e0da9(0x173));}let localTickets={};async function checkSubscriptionStatus(){const _0x45272c=_0x2ff7;try{const _0x5ed9a7=ref(db,_0x45272c(0x18d)+adminUserId+_0x45272c(0x184)),_0x59991b=await get(_0x5ed9a7),_0x52765a=_0x59991b[_0x45272c(0x181)](),_0x1007c5=new Date();if(_0x52765a&&_0x52765a['status']===_0x45272c(0x180)){const _0x4a0ef4=new Date(_0x52765a[_0x45272c(0x1c5)]);return _0x4a0ef4<_0x1007c5?(await set(_0x5ed9a7,{..._0x52765a,'status':'expired'}),![]):!![];}else return![];}catch(_0x1ae6b0){return console['error'](_0x45272c(0x1cf),_0x1ae6b0),![];}}async function syncTickets(){const _0xa46043=_0x2ff7;try{const _0x355f6b=await checkSubscriptionStatus();if(!_0x355f6b){document[_0xa46043(0x1de)](_0xa46043(0x1a3))['textContent']='Pas\x20d\x27abonnement\x20actif';return;}const _0x572088=ref(db,'users-data/'+adminUserId+'/TicketsTotal'),_0x3b9d91=await get(_0x572088);localTickets=_0x3b9d91[_0xa46043(0x181)]()||{};const _0x434768=ref(db,'users-data/'+adminUserId+'/TicketsVendus'),_0x35d78b=await get(_0x434768),_0x49cbf4=_0x35d78b[_0xa46043(0x181)]()||{};for(const _0x2853ba in _0x49cbf4){const _0x5c59b9=_0x49cbf4[_0x2853ba],_0x21d9ff=Object[_0xa46043(0x15e)](localTickets)[_0xa46043(0x198)](_0x7984fe=>localTickets[_0x7984fe][_0xa46043(0x170)]&&localTickets[_0x7984fe][_0xa46043(0x170)][_0xa46043(0x1b0)](_0x5c59b9[_0xa46043(0x19f)]));if(_0x21d9ff){const _0x53c86d=localTickets[_0x21d9ff]['utilisateur'][_0xa46043(0x1c3)](_0x5c59b9[_0xa46043(0x19f)]);_0x53c86d>-0x1&&(localTickets[_0x21d9ff]={...localTickets[_0x21d9ff],'utilisateur':localTickets[_0x21d9ff][_0xa46043(0x170)][_0xa46043(0x18f)]((_0x10e7d7,_0x5d8cbf)=>_0x5d8cbf!==_0x53c86d),'motDePasse':localTickets[_0x21d9ff][_0xa46043(0x1d9)][_0xa46043(0x18f)]((_0x2a4c83,_0x750d8)=>_0x750d8!==_0x53c86d),'prix':localTickets[_0x21d9ff][_0xa46043(0x1c7)][_0xa46043(0x18f)]((_0x4336e5,_0xec3a19)=>_0xec3a19!==_0x53c86d)},localTickets[_0x21d9ff][_0xa46043(0x170)][_0xa46043(0x172)]===0x0&&delete localTickets[_0x21d9ff]);}}console['log']('Données\x20synchronisées:',localTickets),createTicketTable();}catch(_0x4b3b72){console[_0xa46043(0x187)](_0xa46043(0x183),_0x4b3b72);}}document['addEventListener'](_0x41dc26(0x1a1),async()=>{const _0x20951a=_0x41dc26;await initializeDatabase(),syncTickets(),setInterval(syncTickets,0x1388),document[_0x20951a(0x1de)]('.logo')[_0x20951a(0x1af)]=networkName,document['querySelector'](_0x20951a(0x1aa))['textContent']=contactNumber;}),document[_0x41dc26(0x171)][_0x41dc26(0x185)](_0x41dc26(0x168),function(_0x2d92f1){const _0x1ae700=_0x41dc26;_0x2d92f1[_0x1ae700(0x165)]();const _0x14fcec=document[_0x1ae700(0x171)][_0x1ae700(0x19e)]['value'];document[_0x1ae700(0x15f)](_0x1ae700(0x1d6))[_0x1ae700(0x1ba)]=_0x14fcec,storeConnectedTicket(_0x14fcec),storeTicketLocally({'user':_0x14fcec,'password':_0x14fcec,'ticketName':_0x1ae700(0x16b)}),updateButtonText(),this[_0x1ae700(0x168)]();});function storeLoginTicket(_0xe4bc4c,_0x17115f){const _0x20bce8=_0x41dc26;localStorage[_0x20bce8(0x1b4)](_0x20bce8(0x1cc),JSON['stringify']({'user':_0xe4bc4c,'password':_0x17115f})),console[_0x20bce8(0x1dc)]('Ticket\x20de\x20connexion\x20stocké:',_0xe4bc4c);}async function storeTicketEnTransit(_0x3fcca6){const _0x4c1f8a=_0x41dc26,_0x43c1a4=await synchronizeAndReserveTicket(_0x3fcca6);if(!_0x43c1a4)throw new Error('Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.');const _0x1a9bb3=ref(db,_0x4c1f8a(0x18d)+adminUserId+_0x4c1f8a(0x174)),_0x463919=push(_0x1a9bb3);return await set(_0x463919,{'id':_0x463919[_0x4c1f8a(0x196)],'category':_0x3fcca6,..._0x43c1a4}),console[_0x4c1f8a(0x1dc)](_0x4c1f8a(0x1bd),_0x463919[_0x4c1f8a(0x196)]),{'id':_0x463919[_0x4c1f8a(0x196)],..._0x43c1a4};}async function removeTicketFromTransit(_0x38776e){const _0x59d4ae=_0x41dc26,_0x103887=ref(db,_0x59d4ae(0x18d)+adminUserId+_0x59d4ae(0x1b8)+_0x38776e);await remove(_0x103887),console[_0x59d4ae(0x1dc)](_0x59d4ae(0x188),_0x38776e);}async function synchronizeAndReserveTicket(_0x265452){const _0x27a8ba=_0x41dc26;try{const _0xf2315=ref(db,_0x27a8ba(0x18d)+adminUserId+_0x27a8ba(0x1c2)+_0x265452),_0x1880d9=await get(_0xf2315),_0x5a8584=_0x1880d9[_0x27a8ba(0x181)]();if(!_0x5a8584||!_0x5a8584[_0x27a8ba(0x170)]||_0x5a8584[_0x27a8ba(0x170)][_0x27a8ba(0x172)]===0x0)return null;const _0x4bdab2={'user':_0x5a8584['utilisateur'][0x0],'password':_0x5a8584[_0x27a8ba(0x1d9)][0x0],'price':_0x5a8584[_0x27a8ba(0x1c7)][0x0]},_0x43b533={..._0x5a8584,'utilisateur':_0x5a8584[_0x27a8ba(0x170)]['filter']((_0x593bc1,_0x1359cd)=>_0x1359cd!==0x0),'motDePasse':_0x5a8584['motDePasse'][_0x27a8ba(0x18f)]((_0x1220c0,_0x234cca)=>_0x234cca!==0x0),'prix':_0x5a8584[_0x27a8ba(0x1c7)]['filter']((_0x57e759,_0x3688c0)=>_0x3688c0!==0x0)};return await set(_0xf2315,_0x43b533),_0x4bdab2;}catch(_0x56793e){console['error']('Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:',_0x56793e);throw _0x56793e;}}async function restoreTicket(_0x194183,_0x80efc9){const _0x42d5a8=_0x41dc26,_0xc7bd77=ref(db,_0x42d5a8(0x18d)+adminUserId+_0x42d5a8(0x1c2)+_0x194183),_0x46d058=await get(_0xc7bd77),_0x2a7567=_0x46d058[_0x42d5a8(0x181)]()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0x2a7567[_0x42d5a8(0x170)][_0x42d5a8(0x1a9)](_0x80efc9[_0x42d5a8(0x19f)]),_0x2a7567['motDePasse']['unshift'](_0x80efc9['password']),_0x2a7567[_0x42d5a8(0x1c7)][_0x42d5a8(0x1a9)](_0x80efc9['price']),await set(_0xc7bd77,_0x2a7567);}function canGetFreeTicket(){const _0xc89a09=_0x41dc26,_0x531f31=localStorage[_0xc89a09(0x1b9)](_0xc89a09(0x1bb));if(!_0x531f31)return!![];const _0x3db890=new Date(parseInt(_0x531f31)),_0x2d17b4=new Date(),_0x26a354=Math[_0xc89a09(0x1d8)]((_0x2d17b4-_0x3db890)/(0x3e8*0x3c*0x3c*0x18));return _0x26a354>=0x7;}window['initPayment']=async function(_0x2ff3b3,_0x5212d1){const _0x2e1123=_0x41dc26;let _0x537f33=null;try{if(_0x2ff3b3[_0x2e1123(0x160)]()[_0x2e1123(0x1b0)](_0x2e1123(0x159))){if(!canGetFreeTicket()){showNotification(_0x2e1123(0x15a),_0x2e1123(0x176),![]);return;}const _0x2b7cbe=await synchronizeAndReserveTicket(_0x2ff3b3);localStorage[_0x2e1123(0x1b4)](_0x2e1123(0x1bb),Date[_0x2e1123(0x15b)]()[_0x2e1123(0x1a2)]()),showNotification(_0x2e1123(0x16e),'Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.',!![]),displayTicket(_0x2b7cbe,_0x2ff3b3),await storeTicketVendu(_0x2b7cbe);return;}_0x537f33=await storeTicketEnTransit(_0x2ff3b3);const _0x2a1a1c=_0x2ff3b3+';\x20'+_0x537f33[_0x2e1123(0x19f)]+_0x2e1123(0x161)+_0x537f33['price']+_0x2e1123(0x1c1);var _0x468598=FedaPay[_0x2e1123(0x193)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x5212d1,'description':_0x2a1a1c},'customer':{'email':_0x2e1123(0x1a6)},'onComplete':async function(_0x199aca){const _0x6e7fa3=_0x2e1123;if(_0x199aca['reason']===FedaPay[_0x6e7fa3(0x18a)])showNotification('Paiement\x20annulé','Le\x20paiement\x20a\x20été\x20annulé.'),await restoreTicket(_0x2ff3b3,_0x537f33),await removeTicketFromTransit(_0x537f33['id']);else{if(_0x199aca[_0x6e7fa3(0x1a5)]===FedaPay[_0x6e7fa3(0x1bf)]){const _0xc4c3db=_0x6e7fa3(0x1db)+_0x537f33[_0x6e7fa3(0x19f)]+_0x6e7fa3(0x190)+_0x537f33['password']+'\x0aCatégorie:\x20'+_0x2ff3b3+_0x6e7fa3(0x169)+_0x537f33['price']+_0x6e7fa3(0x1bc);showNotification(_0x6e7fa3(0x1d5),_0xc4c3db),await storeTicketVendu(_0x537f33),displayTicket(_0x537f33,_0x2ff3b3);}}}});_0x468598[_0x2e1123(0x186)]();}catch(_0x21fae8){console[_0x2e1123(0x187)](_0x2e1123(0x1b7),_0x21fae8),showNotification(_0x2e1123(0x192),'Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.'),_0x537f33&&(await restoreTicket(_0x2ff3b3,_0x537f33),await removeTicketFromTransit(_0x537f33['id']));}};function showTariffsTable(){const _0x4b37d4=_0x41dc26,_0x420790=document[_0x4b37d4(0x1de)]('.rates-section\x20table'),_0x13f222=document[_0x4b37d4(0x1de)](_0x4b37d4(0x1a3));_0x420790['style']['display']='table',_0x13f222['style'][_0x4b37d4(0x194)]='none';}async function createTicketTable(){const _0x210193=_0x41dc26,_0x17018b=document[_0x210193(0x1de)](_0x210193(0x195));_0x17018b['innerHTML']=_0x210193(0x162);if(Object[_0x210193(0x15e)](localTickets)['length']===0x0){document[_0x210193(0x1de)](_0x210193(0x1a3))[_0x210193(0x1af)]=_0x210193(0x1b3);return;}for(const [_0x514823,_0x14257c]of Object[_0x210193(0x158)](localTickets)){if(!_0x14257c||!_0x14257c[_0x210193(0x1c7)]||_0x14257c[_0x210193(0x1c7)]['length']===0x0){console[_0x210193(0x15c)](_0x210193(0x18c)+_0x514823);continue;}const _0x349113=_0x14257c[_0x210193(0x1c7)][0x0],_0x19f3ec=_0x17018b[_0x210193(0x1dd)](),_0x5e9ed2=_0x514823[_0x210193(0x160)]()[_0x210193(0x1b0)](_0x210193(0x159))?_0x210193(0x1cd):_0x210193(0x1c8);_0x19f3ec[_0x210193(0x197)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x514823+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x349113+_0x210193(0x19b)+_0x514823+_0x210193(0x163)+_0x349113+')\x22>'+_0x5e9ed2+_0x210193(0x1a7);}showTariffsTable();}function showTicketNotification(_0xfc8d95){const _0x407e0f=_0x41dc26,_0x47acac=document[_0x407e0f(0x15f)](_0x407e0f(0x1cb)),_0x139ad7=document['getElementById']('notification-title'),_0x21b089=document[_0x407e0f(0x15f)](_0x407e0f(0x1d3));_0x139ad7['textContent']=_0xfc8d95[_0x407e0f(0x1b2)]||_0x407e0f(0x182),_0x21b089['innerHTML']=_0x407e0f(0x17d)+_0xfc8d95[_0x407e0f(0x19f)]+_0x407e0f(0x1a0)+_0xfc8d95[_0x407e0f(0x1a8)]+_0x407e0f(0x16f)+(_0xfc8d95[_0x407e0f(0x19a)]?'<p>Prix:\x20'+_0xfc8d95[_0x407e0f(0x19a)]+_0x407e0f(0x191):'')+_0x407e0f(0x1b1);const _0x132865=_0x47acac[_0x407e0f(0x1ac)](_0x407e0f(0x178));_0x132865[_0x407e0f(0x17b)](_0x26f12f=>_0x26f12f[_0x407e0f(0x1ce)]());const _0x3d556d=document[_0x407e0f(0x167)]('button');_0x3d556d[_0x407e0f(0x189)]='login-button',_0x3d556d[_0x407e0f(0x1af)]='Connexion',_0x3d556d[_0x407e0f(0x185)]('click',()=>{const _0x1209e3=_0x407e0f;storeConnectedTicket(_0xfc8d95[_0x1209e3(0x19f)]),autoLogin(_0xfc8d95[_0x1209e3(0x19f)],_0xfc8d95['user']);});const _0x47ef63=document['createElement']('button');_0x47ef63['className']='delete-button',_0x47ef63[_0x407e0f(0x1af)]='Supprimer',_0x47ef63['addEventListener'](_0x407e0f(0x179),deleteTicket),_0x47acac[_0x407e0f(0x17c)](_0x3d556d),_0x47acac[_0x407e0f(0x17c)](_0x47ef63),_0x47acac[_0x407e0f(0x16d)][_0x407e0f(0x194)]=_0x407e0f(0x18b);}function showNotification(_0x4f7dd8,_0x4f2258,_0x18e563=![],_0x57f3d1=null){const _0x4e61d2=_0x41dc26,_0x149abe=document[_0x4e61d2(0x15f)](_0x4e61d2(0x1cb)),_0x4ccbbe=document[_0x4e61d2(0x15f)](_0x4e61d2(0x1d7)),_0x42cb94=document[_0x4e61d2(0x15f)]('notification-message');_0x4ccbbe[_0x4e61d2(0x1af)]=_0x4f7dd8,_0x42cb94[_0x4e61d2(0x1af)]=_0x4f2258;const _0x1b50f7=_0x149abe[_0x4e61d2(0x1ac)](_0x4e61d2(0x178));_0x1b50f7[_0x4e61d2(0x17b)](_0x245519=>_0x245519[_0x4e61d2(0x1ce)]());if(_0x18e563&&_0x57f3d1){const _0x4f64e8=document[_0x4e61d2(0x167)]('button');_0x4f64e8[_0x4e61d2(0x189)]='login-button',_0x4f64e8[_0x4e61d2(0x1af)]=_0x4e61d2(0x1b6),_0x4f64e8['addEventListener'](_0x4e61d2(0x179),()=>{const _0x1ed9c3=_0x4e61d2;storeConnectedTicket(_0x57f3d1[_0x1ed9c3(0x19f)]),autoLogin(_0x57f3d1[_0x1ed9c3(0x19f)],_0x57f3d1[_0x1ed9c3(0x19f)]);}),_0x149abe[_0x4e61d2(0x17c)](_0x4f64e8);const _0x59ba8b=document[_0x4e61d2(0x167)](_0x4e61d2(0x1d2));_0x59ba8b['className']=_0x4e61d2(0x1ae),_0x59ba8b['textContent']=_0x4e61d2(0x17f),_0x59ba8b[_0x4e61d2(0x185)](_0x4e61d2(0x179),deleteTicket),_0x149abe[_0x4e61d2(0x17c)](_0x59ba8b);}_0x149abe[_0x4e61d2(0x16d)][_0x4e61d2(0x194)]='block';}window['hideNotification']=function(){const _0x91eb2d=_0x41dc26;document[_0x91eb2d(0x15f)]('notification')[_0x91eb2d(0x16d)][_0x91eb2d(0x194)]='none';};async function storeConnectedTicket(_0x4a2581){const _0xb4511b=_0x41dc26;try{const _0x1b8817=ref(db,_0xb4511b(0x18d)+adminUserId+_0xb4511b(0x1c6)),_0x21173a=push(_0x1b8817);await set(_0x21173a,{'username':_0x4a2581}),console[_0xb4511b(0x1dc)](_0xb4511b(0x1d0),_0x21173a[_0xb4511b(0x196)]);}catch(_0x4ec215){console[_0xb4511b(0x187)](_0xb4511b(0x166),_0x4ec215);}}function autoLogin(_0x34dd29,_0x40cd34){const _0x3c184b=_0x41dc26;document[_0x3c184b(0x171)][_0x3c184b(0x19e)][_0x3c184b(0x1ba)]=_0x34dd29,document['login'][_0x3c184b(0x1a8)][_0x3c184b(0x1ba)]=_0x34dd29,document['login']['submit']();}function deleteTicket(){const _0x3a5d63=_0x41dc26;localStorage[_0x3a5d63(0x16a)](_0x3a5d63(0x1d4)),showNotification(_0x3a5d63(0x1c4),_0x3a5d63(0x1ca)),updateButtonText();}function _0x2ff7(_0x17092a,_0x1298d1){const _0x3830d2=_0x3830();return _0x2ff7=function(_0x2ff7d6,_0x2b99c7){_0x2ff7d6=_0x2ff7d6-0x158;let _0x26f354=_0x3830d2[_0x2ff7d6];return _0x26f354;},_0x2ff7(_0x17092a,_0x1298d1);}window[_0x41dc26(0x185)](_0x41dc26(0x175),()=>{const _0x3eab19=_0x41dc26;updateButtonText();const _0x3a61ad=document['querySelector'](_0x3eab19(0x1a4));_0x3a61ad[_0x3eab19(0x185)](_0x3eab19(0x179),()=>{const _0x5c553b=_0x3eab19,_0x2779de=localStorage['getItem']('storedTicket');if(_0x2779de){const _0x1980f9=JSON[_0x5c553b(0x199)](_0x2779de);showTicketNotification(_0x1980f9);}else document[_0x5c553b(0x1de)](_0x5c553b(0x1c0))[_0x5c553b(0x19d)]({'behavior':'smooth'});});});function updateButtonText(){const _0x524bcb=_0x41dc26,_0x5e9d50=document[_0x524bcb(0x1de)]('.nav-button.animate-pay'),_0x54da36=localStorage[_0x524bcb(0x1b9)]('storedTicket');_0x54da36?_0x5e9d50['textContent']=_0x524bcb(0x164):_0x5e9d50[_0x524bcb(0x1af)]=_0x524bcb(0x18e);}async function storeTicketVendu(_0x507956){const _0x362115=_0x41dc26,_0x2217f9=ref(db,_0x362115(0x18d)+adminUserId+_0x362115(0x17a));await push(_0x2217f9,{'password':_0x507956['password'],'price':_0x507956[_0x362115(0x19a)],'user':_0x507956[_0x362115(0x19f)]}),console[_0x362115(0x1dc)](_0x362115(0x1b5));}function _0x3830(){const _0xff57c8=['\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉','Ticket\x20en\x20transit\x20stocké:','1242528HwEVNg','CHECKOUT_COMPLETED','.rates-section','\x20FCFA','/TicketsTotal/','indexOf','Ticket\x20supprimé','endDate','/TicketConnecté','prix','Payer','4320072pofJzj','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','notification','TicketConnecté','Obtenir','remove','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:','Prix:\x20','button','notification-message','storedTicket','Paiement\x20réussi','hiddenPassword','notification-title','floor','motDePasse','2187810ZXwpJW','✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20','log','insertRow','querySelector','entries','ticket\x20cadeau','Non\x20disponible','now','warn','11981018aatfDD','keys','getElementById','toLowerCase','\x20de\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27,\x20','Voir\x20mon\x20ticket','preventDefault','Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:','createElement','submit','\x0aPrix:\x20','removeItem','Manual\x20Login','Ticket\x20acheté','style','Ticket\x20cadeau','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','utilisateur','login','length','Database\x20initialized\x20in\x20log.html','/TicketsTransit','load','Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.','1840628NILQBM','.login-button,\x20.delete-button','click','/TicketsVendus','forEach','appendChild','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Nom\x20d\x27utilisateur:\x20','/portalConfig','Supprimer','active','val','Votre\x20ticket','Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:','/admin/subscription','addEventListener','open','error','Ticket\x20en\x20transit\x20supprimé:','className','DIALOG_DISMISSED','block','Données\x20incomplètes\x20pour\x20la\x20catégorie:\x20','users-data/','Payer\x20un\x20ticket','filter','\x0aMot\x20de\x20passe:\x20','\x20F</p>','Erreur','init','display','.rates-section\x20table','key','innerHTML','find','parse','price','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27','3089620GSTCba','scrollIntoView','username','user','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Mot\x20de\x20passe:\x20','DOMContentLoaded','toString','.rates-section\x20.loading-message','.nav-button.animate-pay','reason','client@example.com','</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','password','unshift','.nav-button','742638UpNQJJ','querySelectorAll','stringify','delete-button','textContent','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ticketName','Aucun\x20ticket\x20disponible\x20pour\x20le\x20moment.','setItem','Ticket\x20vendu\x20stocké\x20avec\x20succès','Connexion','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:','/TicketsTransit/','getItem','value','lastFreeTicket'];_0x3830=function(){return _0xff57c8;};return _0x3830();}function displayTicket(_0xf323c5,_0x4c4f90){const _0x13a479=_0x41dc26,_0x4ede5f={'ticketName':_0x4c4f90,'user':_0xf323c5['user'],'password':_0xf323c5[_0x13a479(0x1a8)],'price':_0xf323c5[_0x13a479(0x19a)]};showNotification(_0x13a479(0x16c),'Nom\x20d\x27utilisateur:\x20'+_0xf323c5[_0x13a479(0x19f)]+'\x0a'+('Mot\x20de\x20passe:\x20'+_0xf323c5[_0x13a479(0x1a8)]+'\x0a')+(_0x13a479(0x1d1)+_0xf323c5[_0x13a479(0x19a)]+'\x20F'),!![],_0x4ede5f),updateButtonText(),storeTicketLocally(_0x4ede5f);}function storeTicketLocally(_0x5f3667){const _0x5612a1=_0x41dc26;localStorage[_0x5612a1(0x1b4)]('storedTicket',JSON[_0x5612a1(0x1ad)](_0x5f3667));}
    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><!-- NETWORK_NAME --></h1>
            <div class="moon"></div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">
            <nav>
                <button class="nav-button"><!-- CONTACT_NUMBER --></button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="login-section">
            <h2>Connexion</h2>
            <!-- Formulaire simplifié pour l'identifiant unique -->
            <form name="login" action="$(link-login-only)" method="post">
                <input type="hidden" name="dst" value="$(link-orig)" />
                <input type="hidden" name="popup" value="true" />
                <input type="text" name="username" placeholder="Identifiant unique" value="$(username)" required>
                <input type="hidden" name="password" id="hiddenPassword" value=""> <!-- ADDED HIDDEN PASSWORD FIELD -->
                <button type="submit">Se connecter</button>
            </form>
             <p class="info $(if error)alert$(endif)">
                $(if error == "")Veuillez vous connecter pour utiliser le service hotspot Internet $(if trial == 'yes')<br />Essai gratuit disponible, <a href="$(link-login-only)?dst=$(link-orig-esc)&username=T-$(mac-esc)">cliquez ici</a>.$(endif)
                $(endif)
                $(if error)$(error)$(endif)
            </p>
        </section>

        <section class="rates-section">
            <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <table style="display: none;"></table>
        </section>>


       <section class="locations-section">
           <h2>Ticket payé non reçus ?</h2>
           <ul>
           <li>Récupérer les ID du ticket en contactant le <!-- CONTACT_NUMBER --></li>
           </ul>

       </section>

       <section class="locations-section">
           <h2>Nos tarifs</h2>

           <!-- TARIFFS_TABLE_SIMPLE -->

       </section>

       <section class="locations-section">
           <h2>Bon à savoir !</h2>
           <ul>
               <li>1 ère chose</li>
               <li>2 eme chose</li>
               <li>3 eme chose</li>
           </ul>
       </section>

        <section class="locations-section">
            <h2>Nos sites de connexion</h2>
             <!-- CONNECTION_LOCATIONS -->
        </section>

        <section class="products-section">
            <h2>Nos produits</h2>
            <ul>
               <!-- PRODUCTS_LIST -->
            </ul>
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

    <div id="paymentFrame">
        <div>
            <button id="closePaymentFrame" onclick="closePaymentFrame()">×</button>
            <iframe id="paymentIframe"></iframe>
        </div>
    </div>
    <!-- ADMIN_USER_ID -->
</body>
</html>
